{% extends "client/layout_client.html" %}
{% block body %}
<div class="container mx-auto px-4 py-8">
    <!-- Informations personnelles -->
    <div class="bg-dark-secondary shadow-lg rounded-lg mb-8">
        <div class="border-b border-gray-700 px-4 py-5 sm:px-6">
            <h3 class="text-xl font-bold text-white">Mes informations</h3>
        </div>
        <div class="px-4 py-5 sm:p-6">
            <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
                <div>
                    <dt class="text-sm font-medium text-gray-400">Login</dt>
                    <dd class="mt-1 text-sm text-gray-200">{{ utilisateur.login }}</dd>
                </div>
                <div>
                    <dt class="text-sm font-medium text-gray-400">Nom</dt>
                    <dd class="mt-1 text-sm text-gray-200">{{ utilisateur.nom }}</dd>
                </div>
                <div>
                    <dt class="text-sm font-medium text-gray-400">Email</dt>
                    <dd class="mt-1 text-sm text-gray-200">{{ utilisateur.email }}</dd>
                </div>
            </dl>
            <div class="mt-6">
                <a href="/client/coordonnee/edit" class="rounded-md bg-accent-blue hover:bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors duration-200">
                    Modifier son profil
                </a>
            </div>
        </div>
    </div>

    <!-- Adresses -->
    <div class="bg-dark-secondary shadow-lg rounded-lg">
        <div class="border-b border-gray-700 px-4 py-5 sm:px-6">
            <h3 class="text-xl font-bold text-white">Mes adresses</h3>
        </div>
        <div class="px-4 py-5 sm:p-6">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-700">
                    <thead class="bg-dark-accent">
                        <tr>
                            <th class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-200 sm:pl-6">Nom</th>
                            <th class="px-3 py-3.5 text-left text-sm font-semibold text-gray-200">Rue</th>
                            <th class="px-3 py-3.5 text-left text-sm font-semibold text-gray-200">Code Postal</th>
                            <th class="px-3 py-3.5 text-left text-sm font-semibold text-gray-200">Ville</th>
                            <th class="px-3 py-3.5 text-left text-sm font-semibold text-gray-200">Nbr. utilisation commande</th>
                            <th class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                <span class="sr-only">Actions</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-700">
                        {% for adresse in adresses %}
                        <tr class="hover:bg-dark-accent transition-colors duration-200">
                            <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6 text-gray-200">
                                {{ adresse.nom }}
                            </td>
                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-300">{{ adresse.rue }}</td>
                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-300">{{ adresse.code_postal }}</td>
                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-300">{{ adresse.ville }}</td>
                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-300">
                                {% if 'nbr_commandes' in adresse %}{{ adresse.nbr_commandes }}{% endif %}
                            </td>
                            <td class="whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6">
                                <a href="/client/coordonnee/edit_adresse?id_adresse={{ adresse.id_adresse }}" 
                                   class="rounded-md bg-accent-blue hover:bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm transition-colors duration-200">
                                    Modifier
                                </a>
                                <form action="/client/coordonnee/delete_adresse" method="post" class="inline-block ml-2">
                                    <input type="hidden" name="id_adresse" value="{{ adresse.id_adresse }}">
                                    <button type="submit" 
                                            class="rounded-md bg-red-600 hover:bg-red-700 px-3 py-1.5 text-sm font-semibold text-white shadow-sm transition-colors duration-200">
                                        Supprimer
                                    </button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
            <div class="mt-6">
                {% if nb_adresses is defined %}
                    {% if nb_adresses < 4 %}
                        <a href="/client/coordonnee/add_adresse" 
                           class="rounded-md bg-accent-blue hover:bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors duration-200">
                            Ajouter une adresse
                        </a>
                    {% endif %}
                    
                    <p class="mt-4 text-sm text-accent-blue">
                        (<strong>{{ nb_adresses }}</strong> / 4 adresses ; <strong>{{ nb_adresses_tot }}</strong> adresses pour l'utilisateur)
                    </p>
                {% else %}
                    <a href="/client/coordonnee/add_adresse" 
                       class="rounded-md bg-accent-blue hover:bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors duration-200">
                        Ajouter une adresse
                    </a>
                {% endif %}
            </div>
            
            <div class="mt-6 border-t border-gray-700 pt-6">
                <a href="/client/article/show" 
                   class="rounded-md bg-dark-accent hover:bg-gray-700 px-4 py-2 text-sm font-semibold text-gray-300 shadow-sm transition-colors duration-200">
                    Retour aux articles
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
